

<div style="margin-left: 250px;">  <ng-container *ngTemplateOutlet="elements; context:{value:container}"></ng-container></div>

<!-- 

<div *ngFor="let element of container; trackBy:trackElement" style="margin-left: 250px;">

  <div *ngIf="element.type == 'button'">
    <button (click)="click(element)">{{element.prop.title}}</button>
  </div>
  <div *ngIf="element.type == 'text'">
    {{element.prop.data}}
  </div>
  <div *ngIf="element.type == 'html'">
    <div [innerHTML]="element.prop.data"></div>
  </div>
  <div *ngIf="element.type == 'input'">
    <input [value]="element.prop.value" (change)="input_change(element, $event)">
  </div>

  <div *ngIf="element.type == 'select' || element.type == 'select_t' ">
    <select #options  (change)="onSelected(element, options.value)">
      <option *ngFor="let x of element.prop.options" [selected] = "element.prop.value == x">{{x}}</option>
    </select>
  </div>
  <div *ngIf="element.type == 'list'">
    <ul>
      <li *ngFor="let l of element.prop.list" (click)="list_click(element,l)">{{l}}</li>
    </ul>
  </div>
  <div *ngIf="element.type == 'iframe'">
    <iframe width="100%" height="300" [src]="sanitizer.bypassSecurityTrustResourceUrl(element.prop.url)"></iframe>
  </div>
</div> -->

<div style="background-color: rgb(240, 242, 246); height: 100%; /* 100% Full-height */
width: 250px; /* 0 width - change this with JavaScript */
position: fixed; /* Stay in place */
z-index: 1; /* Stay on top */
top: 0; /* Stay at the top */
left: 0;
overflow-x: hidden; /* Disable horizontal scroll */
padding-top: 60px; /* Place content 60px from the top */
transition: 0.5s; /* 0.5 second transition effect to slide in the sidenav */"
>
side bar

  <ng-container *ngTemplateOutlet="elements; context:{value:sidebar}"></ng-container>
</div>





  <ng-template #elements let-value="value">
    <!-- {{value | json}} -->
    <div *ngFor="let element of value; trackBy:trackElement" >

      <div *ngIf="element.type == 'button'">
        <button (click)="click(element)">{{element.prop.title}}</button>
      </div>
      <div *ngIf="element.type == 'text'">
        {{element.prop.data}}
      </div>
      <div *ngIf="element.type == 'html'">
        <!-- {{element.prop.data}} --> 
        <div [innerHTML]="element.prop.data"></div>
      </div>
      <div *ngIf="element.type == 'editable_html'">
        <ng-container *ngTemplateOutlet="editable;context:{element:element}"></ng-container>
      </div>
      <div *ngIf="element.type == 'input'">
        <input [value]="element.prop.value" (change)="input_change(element, $event)">
      </div>
    
      <div *ngIf="element.type == 'select' || element.type == 'select_t' ">
        <!-- {{element.prop.value}} -->
        <select #options  (change)="onSelected(element, options.value)">
          <option *ngFor="let x of element.prop.options" [selected] = "element.prop.value == x">{{x}}</option>
        </select>
      </div>
      <div *ngIf="element.type == 'list'">
        <ul>
          <li *ngFor="let l of element.prop.list" (click)="list_click(element,l)">{{l}}</li>
        </ul>
      </div>
      <div *ngIf="element.type == 'iframe'" style="height: 93vh">
        <iframe width="100%" height="100%" [src]="sanitizer.bypassSecurityTrustResourceUrl(element.prop.url)"></iframe>
      </div>
      <div *ngIf ="element.type == 'container'"> 
        <ng-container *ngTemplateOutlet="elements; context:{value:element.data}"></ng-container>
      </div>
      <div *ngIf ="element.type == 'expander'"> 
        <details><summary>{{element.title}}</summary> <ng-container *ngTemplateOutlet="elements; context:{value:element.data}"></ng-container></details>
        
      </div>
      <div *ngIf="element.type == 'code'">
        <textarea [(ngModel)]="element.prop.code" (input)="change_cell(element)" name="" id="" cols="30" rows="10"></textarea>
        <button (click)="run_block(element)">run</button>
        <div>{{element.prop.last_run_result}}</div>
        <div>{{code_output}}</div>
      </div>
      <div *ngIf ="element.type == 'query'">
        <textarea [(ngModel)] ="element.prop.query" name="" id="" cols="30" rows="10"></textarea>
        <button (click)="run_query(element)">run</button>
        <div [innerHTML]="query_output"></div>
      </div>
    </div>

  </ng-template>

  <ng-template #editable let-element="element">
    <div #editableDiv>
    <div *ngFor="let block of element.prop.html, index as i" >
      <h1 *ngIf="block.tag == 'h1'" contenteditable [id]="block._id" (input)="block_change(element, block, $event)" (keydown)="enter($event, i, element, block)" >{{block.html}}</h1>
      <p *ngIf="block.tag == 'p'" [id]="block._id" contenteditable (input)="block_change(element, block, $event)"  (keydown)="enter($event, i, element, block)">{{block.html}}</p>
      <ul *ngIf="block.tag == 'list'" [id]="block._id" contenteditable (input)="block_change(element, block, $event)"  (keydown)="enter($event, i, element, block)" [innerHTML]="block.html"></ul>
    </div>
  </div>
    
    <!-- <span  #editableDiv  (input)="change_editable(element,$event)" [innerHTML]="element.prop.html"></span> -->
  </ng-template>


  <div style="right:0; position:fixed; bottom:0" *ngIf="show_context">
    <ul>
      <li (click)="update_block('h1')">h1</li>
      <li (click)="update_block('h2')">h2</li>
      <li (click)="update_block('p')">p</li>
      <li (click)="update_block('list')">list</li>
    </ul>
  </div>
 

  